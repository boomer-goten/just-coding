## Part 1. Инструмент **ipcalc**
#### 1.1. Сети и маски
Установил утилиту ipcalc командой `sudo apt install ipcalc`
1. Адрес сети определяется командой `ipcalc 192.167.38.54/13`
    - ![Адрес сети](./Screenshots/Part_1_1.png 'Адрес сети')
    - Адрес сети указан в графе `Network` и равен `192.160.0.0/13`
2. `ipcalc` умеет переводить маску в префиксную и двоичную часть
    - `ipcalc 255.255.255.0` при подаче такого ip адреса маска подсети будет такая же
        - ![перевод маски](./Screenshots/Part_1_2.png 'Перевод маски 255.255.255.0')
        - Как видно из вывода команды префиксная часть `/24`, а двоичная запись `11111111.11111111.11111111. 00000000`
    - `ipcalc 192.160.0.0/15` при подаче такого ip адреса маска подсети будет `/15`
        - ![перевод маски](./Screenshots/Part_1_3.png 'Перевод маски /15')
        - Как видно из вывода команды обычная форма записи `255.254.0.0`, а двоичная запись `11111111.1111111 0.00000000.00000000`
    - обычная форма записи и префиксная маски `11111111.11111111.11111111.11110000`
        - Обычная форма записи 255.255.255.240
        - Префиксная форма записи /28
3. Максимальный и минальный хосты в сети `12.167.38.4`
    - При маске `/8`
        - ![маска /8](./Screenshots/Part_1_4.png 'маска /8')
        - минимальный хост 12.0.0.1 максимальный - 12.255.255.254
    - При маске `11111111.11111111.00000000.00000000`
        - ![маска 1111111.11111111.00000000.00000000](./Screenshots/Part_1_5.png 'маска 1111111.11111111.00000000.00000000')
        - минимальный хост 12.167.0.1 максимальный - 12.167.255.254
    - При маске `255.255.254.0`
        - ![маска 255.255.254.0](./Screenshots/Part_1_6.png 'маска 255.255.254.0')
        - минимальный хост 12.167.38.1 максимальный - 12.167.39.254
    - При маске `/4`
        - ![маска /4](./Screenshots/Part_1_7.png 'маска /4')
        - минимальный хост 0.0.0.1 максимальный - 15.255.255.254

#### 1.2. localhost
-   При использовании команды `ipcalc 194.34.23.100` мы увидим что сеть является внешней и мы не можем к ней обратится
    - ![194.34.23.100](./Screenshots/Part_1_8.png 'Сеть 194.34.23.100')
-   При использовании команды `ipcalc 127.0.0.2` мы увидим что сеть является внутренней и мы можем к ней обратится, так как там используется сетевой интерфейс loopback
    - ![127.0.0.2](./Screenshots/Part_1_9.png 'Сеть 127.0.0.2')
-   При использовании команды `ipcalc 127.1.0.1` мы увидим что сеть является внутренней и мы можем к ней обратится, так как там используется сетевой интерфейс loopback
    - ![127.1.0.1](./Screenshots/Part_1_10.png 'Сеть 127.1.0.1')
-   При использовании команды `ipcalc 128.0.0.1` мы увидим что сеть является внешней и мы не можем к ней обратится
    - ![128.0.0.1](./Screenshots/Part_1_11.png 'Сеть 128.0.0.1')

#### 1.3. Диапазоны и сегменты сетей
1. какие из перечисленных IP можно использовать в качестве публичного, а какие только в качестве частных:
    - ![Первые три адреса](./Screenshots/Part_1_12.png '10.0.0.45, 134.43.0.2, 192.168.4.2')
    - Видно что 10.0.0.45 является частной сетью, 134.43.0.2 - публичной, 192.168.4.2 - частной
    - ![Вторые три адреса](./Screenshots/Part_1_13.png '172.20.250.4, 172.0.2.1, *192.172.0.1')
    - Видно что 172.20.250.4 является частной сетью, 172.0.2.1 - публичной, 192.172.0.1 - публичной
    - ![Третьи три адреса](./Screenshots/Part_1_14.png '172.68.0.2, 172.16.255.255, 10.10.10.10')
    - Видно что 172.68.0.2 является публичной сетью, 172.16.255.255 - частной, 10.10.10.10 - частной
    - ![192.169.168.1](./Screenshots/Part_1_15.png '192.169.168.1')
    - Видно что 192.169.168.1 является публичной сетью
2. Какие из перечисленных IP адресов шлюза возможны у сети *10.10.0.0/18*: *10.0.0.1*, *10.10.0.2*, *10.10.10.10*, *10.10.100.1*, *10.10.1.255*
    - IP адреса возможны смотря на минимальный и максимальный хост
        - Возможны: `10.10.0.2`, `10.10.10.10`, `10.10.1.255`
        - Невозможны: `10.0.0.1`, `10.10.100.1`
    - ![Возможные адреса хостов в сети](./Screenshots/Part_1_16.png 'Возможные адреса хостов в сети')

## Part 2. Статическая маршрутизация между двумя машинами
##### Поднимем две виртуальные машины (далее -- ws1 и ws2)
- С помощью команды `ip a` посмотреть существующие сетевые интерфейсы:
    - для ws1
        - ![ws1](./Screenshots/Part_2_1.png 'ip a для ws1')
    - для ws2
        - ![ws2](./Screenshots/Part_2_2.png 'ip a для ws2')
- Описать сетевой интерфейс, соответствующий внутренней сети, на обеих машинах и задать следующие адреса и маски:
    - для ws1 - *192.168.100.10*, маска */16*
        - ![ws1](./Screenshots/Part_2_3.png 'ws1 - *192.168.100.10*, маска */16*')
    - для ws2 - *172.24.116.8*, маска */12*
        - ![ws2](./Screenshots/Part_2_4.png 'ws2 - *172.24.116.8*, маска */12*')
- Выполнить команду `netplan apply` для перезапуска сервиса сети:
    - для ws1
        - ![ws1](./Screenshots/Part_2_5.png 'netplan apply для ws1')
    - для ws2
        - ![ws2](./Screenshots/Part_2_6.png 'netplan applyдля ws2')
- Пропинговать соединение между машинами
    - пинг с ws1 ws2
        - ![ws1](./Screenshots/Part_2_13.png 'пинг с ws1 ws2')
    - пинг с ws2 ws1
        - ![ws2](./Screenshots/Part_2_14.png 'пинг с ws2 ws1')

- Добавить статический маршрут от одной машины до другой и обратно при помощи команды вида `ip r add`
    - для ws1
        - ![ws1](./Screenshots/Part_2_7.png 'ip a для ws1')
    - для ws2
        - ![ws2](./Screenshots/Part_2_8.png 'ip a для ws2')

- Добавить статический маршрут от одной машины до другой с помощью файла *etc/netplan/00-installer-config.yaml*
    - для ws1
        - ![ws1](./Screenshots/Part_2_9.png 'yaml для ws1')
    - для ws2
        - ![ws2](./Screenshots/Part_2_10.png 'yaml для ws2')

- Пропинговать соединение между машинами
    - пинг с ws1 ws2
        - ![ws1](./Screenshots/Part_2_11.png 'пинг с ws1 ws2')
    - пинг с ws2 ws1
        - ![ws2](./Screenshots/Part_2_12.png 'пинг с ws2 ws1')
    
## Part 3. Утилита **iperf3**
- Скорость соединения
    - 8 Mbps = 8 / 8 = 1 MB/s
    - 100 MB/s = 100 * 1024 * 8 = 819200 Kbps
    - 1 Gbps = 1 * 1024 = 1024 Mbps
- Утилита `iperf3`
    - Запускаем на машине ws1 iperf3 в качестве сервера командой `iperf3 -s -f K`
        - ![ws1 сервер](./Screenshots/Part_3_1.png 'ws1 как сервер')
    - Запускаем на машине ws2 iperf3 в качестве клиента для подключения к серверу командой `iperf3 -с 192.168.100.10 -f K`
        - ![ws1 сервер](./Screenshots/Part_3_2.png 'ws2 как клиент')

## Part 4. Сетевой экран
#### 4.1. Утилита **iptables**
- Создать файл */etc/firewall.sh*, имитирующий фаерволл, на ws1 и ws2:
    - файл `/etc/firewall.sh` для машины ws1
        - ![ws1](./Screenshots/Part_4_1.png '/etc/firewall.sh для ws1')
    - файл `/etc/firewall.sh` для машины ws2
        - ![ws2](./Screenshots/Part_4_2.png '/etc/firewall.sh для ws2')
- Запустить файлы на обеих машинах командами `chmod +x /etc/firewall.sh` и `/etc/firewall.sh`
    - `chmod +x /etc/firewall.sh` и `/etc/firewall.sh` для машины ws1
        - ![ws1](./Screenshots/Part_4_3.png '/etc/firewall.sh для ws1')
    - `chmod +x /etc/firewall.sh` и `/etc/firewall.sh` для машины ws2
        - ![ws2](./Screenshots/Part_4_4.png '/etc/firewall.sh для ws2')
- Разница стратегий состоит в том что команды выполняются по очереди сверху в низ в скрипте. Когда мы для ws1 применили запрещающее правило, следущее разрешающее правило не перезаписало его и на выходе мы получаем запрещающее правило. Для второй машины сначало мы записали разрешающее правило, потом мы переписали его запрещающим правилом. Запрещающее правило перезаписать нельзя
#### 4.2. Утилита **nmap**
- Командой **ping** найти машину, которая не "пингуется", после чего утилитой **nmap** показать, что хост машины запущен
    - как видно из скришота мы не можем с ws1 пингануть ws2, при этом команда `nmap` выводит `host is up`
        - ![с ws1 ws2](./Screenshots/Part_4_5.png 'ping and nmap')

## Part 5. Статическая маршрутизация сети
- Поднял пять виртуальных машин (3 рабочие станции (ws11, ws21, ws22) и 2 роутера (r1, r2))
#### 5.1. Настройка адресов машин
- Настроил конфигурации машин в *etc/netplan/00-installer-config.yaml* согласно сети на рисунке.
    - Настройки конфигурации сети машины ws11
        - ![ws11](./Screenshots/Part_5_1.png 'настройки сети ws11')
    - Настройки конфигурации сети машины ws21
        - ![ws21](./Screenshots/Part_5_2.png 'настройки сети ws21')
    - Настройки конфигурации сети машины ws22
        - ![ws22](./Screenshots/Part_5_3.png 'настройки сети ws22')
    - Настройки конфигурации сети машины r1
        - ![r1](./Screenshots/Part_5_4.png 'настройки сети r1')
    - Настройки конфигурации сети машины r2
        - ![r2](./Screenshots/Part_5_5.png 'настройки сети r2')
- Перезапустить сервис сети. Если ошибок нет, то командой `ip -4 a` проверить, что адрес машины задан верно. Также пропинговать ws22 с ws21. Аналогично пропинговать r1 с ws11.
    - вывод команд ws11
        - ![ws11](./Screenshots/Part_5_6.png 'вывод команд ws11')
    - вывод команд ws21, а так же пинг машины ws22
        - ![ws21](./Screenshots/Part_5_7.png 'вывод команд ws21 c пингом')
    - вывод команд ws22
        - ![ws22](./Screenshots/Part_5_8.png 'вывод команд ws22')
    - вывод команд r1, а так же пинг машины ws11
        - ![r1](./Screenshots/Part_5_10.png 'вывод команд r1 с пингом')
    - вывод команд r2
        - ![r2](./Screenshots/Part_5_9.png 'вывод команд r2')
#### 5.2. Включение переадресации IP-адресов.
- Для включения переадресации IP, выполните команду на роутерах: `sysctl -w net.ipv4.ip_forward=1`
    - вывод команды r1
        - ![r1](./Screenshots/Part_5_11.png 'вывод команд r1')
    - вывод команды r2
        - ![r2](./Screenshots/Part_5_12.png 'вывод команд r2')
- Откройте файл */etc/sysctl.conf* и добавьте в него следующую строку: `net.ipv4.ip_forward = 1`
    - конфигурация файла /etc/sysctl.conf для r1
        - ![r1](./Screenshots/Part_5_13.png 'вывод команд r1')
    - конфигурация файла /etc/sysctl.conf для r2
        - ![r2](./Screenshots/Part_5_14.png 'вывод команд r2')
#### 5.3. Установка маршрута по-умолчанию
- Настроить маршрут по-умолчанию (шлюз) для рабочих станций. Для этого добавить gateway4 \[ip роутера\] в файле конфигураций
    - Настройки конфигурации сети машины ws11
        - ![ws11](./Screenshots/Part_5_15.png 'настройки сети ws11')
    - Настройки конфигурации сети машины ws21
        - ![ws21](./Screenshots/Part_5_16.png 'настройки сети ws21')
    - Настройки конфигурации сети машины ws22
        - ![ws22](./Screenshots/Part_5_17.png 'настройки сети ws22')
- Вызвать `ip r` и показать, что добавился маршрут в таблицу маршрутизации
    - вывод команды `ip r` ws11
        - ![ws11](./Screenshots/Part_5_18.png 'вывод команды `ip r` ws11')
    - вывод команды `ip r` ws22
        - ![ws21](./Screenshots/Part_5_19.png 'вывод команды `ip r` ws21')
    - вывод команды `ip r` ws21
        - ![ws22](./Screenshots/Part_5_20.png 'вывод команды `ip r` ws22')
- Пропинговать с ws11 роутер r2 и показать на r2, что пинг доходит. Для этого использовать команду: `tcpdump -tn -i enp0s9`
    - использование команды `ping` c машины ws11
        - ![ws11](./Screenshots/Part_5_21.png 'ping c машины ws11')
    - использование команды `tcpdump -tn -i enp0s9` c машины r2
        - ![r2](./Screenshots/Part_5_22.png 'tcpdump -tn -i eth1 c машины r2')
#### 5.4. Добавление статических маршрутов
- Добавить в роутеры r1 и r2 статические маршруты в файле конфигураций.
    - конфигурация файла `etc/netplan/00-installer-config.yaml` для r1
        - ![r1](./Screenshots/Part_5_23.png 'yaml для r1')
    - конфигурация файла `etc/netplan/00-installer-config.yaml` для r2
        - ![r2](./Screenshots/Part_5_24.png 'yaml для r2')
- Вызвать `ip r` и показать таблицы с маршрутами на обоих роутерах.
    - вывод команды r1
        - ![r1](./Screenshots/Part_5_25.png 'вывод команды r1')
    - вывод команды r2
        - ![r2](./Screenshots/Part_5_26.png 'вывод команды r2')
- Запустить команды на ws11: `ip r list 10.10.0.0/18` и `ip r list 0.0.0.0/0`
    - ![ws11](./Screenshots/Part_5_27.png 'вывод команд c машины ws11')
- Адрес 0.0.0.0/0 используется в случае если не указан конкретный адрес получателя либо это означает, что в таблице маршрутизации не указан конкретный адрес в качестве следующего перехода на пути пакета к его конечному получателю. В наше же случает для ws11 адрес 10.10.0.0/18 является его сетью и мы можем к нему обратиться напрямую так они находяться в одной сети
#### 5.5. Построение списка маршрутизаторов
- Запустить на r1 команду дампа: `tcpdump -tnv -i eth0`. При помощи утилиты **traceroute** построить список маршрутизаторов на пути от ws11 до ws21
    - запуск команды `traceroute` с машины ws11 до машины ws21
        - ![ws11](./Screenshots/Part_5_28.png 'traceroute c машины ws11')
    - запуск команды `tcpdump -tnv -i enp0s8` с машины r1
        - ![r1](./Screenshots/Part_5_29.png 'traceroute c машины r1')
    - Команда traceroute linux использует UDP пакеты. Она отправляет пакет с TTL=1 и смотрит адрес ответившего узла, дальше TTL=2, TTL=3 и так пока не достигнет цели. Каждый раз отправляется по три пакета и для каждого из них измеряется время прохождения. Пакет отправляется на случайный порт, который, скорее всего, не занят, что мы и видим при вызове команды `tcpdump -tnv -i enp0s8`. Пакеты отправляются на разные порты до тех пор пока не попадет на нужный. 
#### 5.6. Использование протокола **ICMP** при маршрутизации
- Запустить на r1 перехват сетевого трафика, проходящего через eth0 с помощью команды: `tcpdump -n -i enp0s8 icmp`
    - ![r1](./Screenshots/Part_5_31.png 'traceroute c машины r1')
- Пропинговать с ws11 несуществующий IP (например, *10.30.0.111*) с помощью команды: `ping -c 1 10.30.0.111`
    - ![ws11](./Screenshots/Part_5_30.png 'ping c машины ws11')
## Part 6. Динамическая настройка IP с помощью **DHCP**
- Для r2 настроить в файле */etc/dhcp/dhcpd.conf* конфигурацию службы **DHCP**:
- Установим на r2 dhcp server командой `sudo apt install isc-dhcp-server`
    1. указать адрес маршрутизатора по-умолчанию, DNS-сервер и адрес внутренней сети.
    - ![r2](./Screenshots/Part_6_1.png 'конфигурация файла для r2')
        - необходимо изменить файл `/etc/default/isc-dhcp-server` добавить имя сетевой карты через которую будем выдавать IP адресс
        - ![r2](./Screenshots/Part_6_2.png 'конфигурация файла для r2')
    2. в файле *resolv.conf* прописать `nameserver 8.8.8.8.`
    - ![r2](./Screenshots/Part_6_3.png 'конфигурация файла для r2')
- Перезагрузить службу **DHCP** командой `systemctl restart isc-dhcp-server`, предварительно в файле `etc/netplan/00-installer-config.yaml` разрешить выдачу файлов по dhcp4. Машину ws21 перезагрузить при помощи `reboot` и через `ip a` показать, что она получила адрес. Также пропинговать ws22 с ws21.
    - в файле `etc/netplan/00-installer-config.yaml` разрешить выдачу файлов по dhcp4
        - ![ws21](./Screenshots/Part_6_4.png 'конфигурация файла etc/netplan/00-installer-config.yaml')
    - перезагрузка службы `DHCP`
        - ![ws21](./Screenshots/Part_6_5.png 'перезагрузка службы DHCP')
    - использование команды `ip a` и пинг машины w22
        - ![ws21](./Screenshots/Part_6_6.png 'ip a и ping ws11')
- Указать MAC адрес у ws11, для этого в *etc/netplan/00-installer-config.yaml* надо добавить строки: `macaddress: 10:10:10:10:10:BA`, `dhcp4: true`
    - ![ws11](./Screenshots/Part_6_7.png 'настройки сети ws11')
- Для r1 настроить аналогично r2, но сделать выдачу адресов с жесткой привязкой к MAC-адресу (ws11). Провести аналогичные тесты
    1. указать адрес маршрутизатора по-умолчанию, DNS-сервер и адрес внутренней сети.
    - ![r1](./Screenshots/Part_6_8.png 'конфигурация файла для r1')
        - необходимо изменить файл `/etc/default/isc-dhcp-server` добавить имя сетевой карты через которую будем выдавать IP адресс
        - ![r1](./Screenshots/Part_6_9.png 'конфигурация файла для r1')
    2. в файле *resolv.conf* прописать `nameserver 8.8.8.8.`
    - ![r1](./Screenshots/Part_6_10.png 'конфигурация файла для r1')
- Перезагрузить службу **DHCP** командой `systemctl restart isc-dhcp-server`, предварительно в файле `etc/netplan/00-installer-config.yaml` разрешить выдачу файлов по dhcp4. Машину ws11 перезагрузить при помощи `reboot` и через `ip a` показать, что она получила адрес. Также пропинговать ws22 с ws11.
    - перезагрузка службы `DHCP`
        - ![ws11](./Screenshots/Part_6_11.png 'перезагрузка службы DHCP')
    - использование команды `ip a` и пинг машины ws22
        - ![ws11](./Screenshots/Part_6_12.png 'ip a и ping ws22')
- Запросить с ws21 обновление ip адреса c использованием команд `sudo dhclient -r enp0s8` для освобождения ip адреса и `sudo dhclient enp0s8` для обновления ip адреса
    - ![w21](./Screenshots/Part_6_13.png 'ip адресс w21 до обновления')
    - ![w21](./Screenshots/Part_6_14.png 'ip адресс w21 после обновления')
## Part 7. **NAT**
- В файле */etc/apache2/ports.conf* на ws22 и r1 изменить строку `Listen 80` на `Listen 0.0.0.0:80`, то есть сделать сервер Apache2 общедоступным. Установим apache2 на машинах ws22 и r1 командой `sudo apt install apache2`.
    - `/etc/apache2/ports.conf` для ws22
        - ![ws22](./Screenshots/Part_7_1.png 'конфигурация файла для ws22')
    - `/etc/apache2/ports.conf` для r1
        - ![r1](./Screenshots/Part_7_2.png 'конфигурация файла для r1')
- Запустить веб-сервер Apache командой `service apache2 start` на ws22 и r1
    - запуск apache2 для ws22
        - ![ws22](./Screenshots/Part_7_3.png 'запуск apache2 на ws22')
    - запуск apache2 для r1
        - ![r1](./Screenshots/Part_7_4.png 'запуск apache2 на  r1')
- Добавить в фаервол, созданный по аналогии с фаерволом из Части 4, на r2 следующие правила:
1. Удаление правил в таблице filter - `iptables -F`
2. Удаление правил в таблице "NAT" - `iptables -F -t nat`
3. Отбрасывать все маршрутизируемые пакеты - `iptables --policy . --policy FORWARD DROP` 
- Конфигурация скрипта `/etc/firewall` на r2:
    - ![r2](./Screenshots/Part_7_5.png 'скрипт для r2')
- Запускаем скрипт на r2
    - ![r2](./Screenshots/Part_7_6.png 'запуск скрипта для r2')
- Проверить соединение между ws22 и r1 командой `ping`
*При запуске файла с этими правилами, ws22 не должна "пинговаться" с r1*
    - ![ws22 и r1](./Screenshots/Part_7_7.png 'проверка соединения между ws22 и r1')
- Добавить в файл ещё одно правило:
4. Разрешить маршрутизацию всех пакетов протокола **ICMP**
    - ![r2](./Screenshots/Part_7_8.png 'Разрешаем маршрутизацию ICMP пакетов')
- Проверить соединение между ws22 и r1 командой `ping`
    - ![ws22 и r1](./Screenshots/Part_7_9.png 'проверка соединения между ws22 и r1')
- Добавить в файл ещё два правила:
5. Включить **SNAT**, а именно маскирование всех локальных ip из локальной сети, находящейся за r2 (по обозначениям из Части 5 - сеть 10.20.0.0)
6. Включить **DNAT** на 8080 порт машины r2 и добавить к веб-серверу Apache, запущенному на ws22, доступ извне сети. *Перед тестированием отключим сетевой интерфейс **NAT** (его наличие можно проверить командой `ip a`) в VirtualBox, если он включен*
    - ![r1 and r2](./Screenshots/Part_7_10.png 'отключение NAT r1 and r2')
    - ![ws22](./Screenshots/Part_7_11.png 'отключение NAT ws22')
    - ![r2](./Screenshots/Part_7_12.png 'конфигурация скрипта')
- Проверить соединение по TCP для **SNAT**, для этого с ws22 подключиться к серверу Apache на r1 командой: `telnet [адрес] [порт]`
    - ![ws22](./Screenshots/Part_7_13.png 'подключения к r1 через порт 80')
- Проверить соединение по TCP для **DNAT**, для этого с r1 подключиться к серверу Apache на ws22 командой `telnet` (обращаться по адресу r2 и порту 8080)
    - ![r1](./Screenshots/Part_7_14.png 'подключения к ws22 через порт 8080')
## Part 8. Дополнительно. Знакомство с **SSH Tunnels**
Запустить на r2 фаервол с правилами из Части 7
- Запустить на r2 фаервол с правилами из Части 7
    - ![r2](./Screenshots/Part_8_1.png 'запускаем скрипт из части 7 на r2')
- Запустить веб-сервер **Apache** на ws22 только на localhost (то есть в файле */etc/apache2/ports.conf* изменить строку `Listen 80` на `Listen localhost:80`
    - ![r2](./Screenshots/Part_8_2.png 'запускаем сервер apache2 на localhost:80')
- Воспользоваться *Local TCP forwarding* с ws21 до ws22, чтобы получить доступ к веб-серверу на ws22 с ws21
    - для этого в файле `/etc/ssh/sshd_config` нужно раскомментировать строчку `AllowTcpForwarding yes` на машине ws22 и ws21
        - ![ws21 and ws22](./Screenshots/Part_8_3.png 'конфигурация файла /etc/ssh/sshd_config')
    - далее используя Local tcp forwarding подключаемся к машине ws22 с машины ws21 командой `ssh -L 32686:localhost:80 10.20.0.20` используя локальный порт `32686`
        - ![ws21](./Screenshots/Part_8_4.png 'подключение к машине ws22')
    - создаем второй терминал комбинацией клавиш `Alt + F2` и и выполняем команду: `telnet 127.0.0.1 [локальный порт]`
        - ![ws21](./Screenshots/Part_8_5.png 'выполнение команды telnet 127.0.0.1 [локальный порт]')
- Воспользоваться *Remote TCP forwarding* c ws11 до ws22, чтобы получить доступ к веб-серверу на ws22 с ws11
    - для этого в файле `/etc/ssh/sshd_config` нужно раскомментировать строчку `AllowTcpForwarding yes` на машине ws11
        - ![ws11](./Screenshots/Part_8_3.png 'конфигурация файла /etc/ssh/sshd_config')
    - для этого в файле `/etc/ssh/sshd_config` нужно раскомментировать строчку `AllowTcpForwarding yes` и строчку `AllowAgentForwarding yes` на машине ws11
        - ![r1 and r2](./Screenshots/Part_8_6.png 'конфигурация файла /etc/ssh/sshd_config для r1 и r2')
    - далее используя Local tcp forwarding подключаемся к машине ws22 с машины ws11 cерией команд:
        - `ssh -L 8080:localhost:8080 10.10.0.1` используя локальный порт `8080` идет подключение по ssh с машины ws11 на r1
            - ![с ws11 в r1](./Screenshots/Part_8_7.png 'подключение по ssh к машине r1 с машины ws11')
        - `ssh -L 8080:localhost:8080 10.20.0.1` используя локальный порт `8080` идет подключение по ssh с машины r1 на r2
            - ![с r1 в r2](./Screenshots/Part_8_8.png 'подключение по ssh к машине r2 с машины r1')
        - `ssh -L 8080:localhost:80 10.20.0.20` используя локальный порт `8080` идет подключение по ssh с машины r2 на ws22 к localhost:80 тоесть на сервер
            - ![с r2 в ws22](./Screenshots/Part_8_9.png 'подключение по ssh к машине ws22 с машины r2')
    - создаем второй терминал комбинацией клавиш `Alt + F2` и и выполняем команду: `telnet 127.0.0.1 [локальный порт]`
        - ![ws21](./Screenshots/Part_8_10.png 'выполнение команды telnet 127.0.0.1 [локальный порт]')
    - 2 cпособ. Необходимо с машины ws22 подключиться к ws11 к любому свободному порту чтобы заставить его слушать этот порт, затем с машины ws11 устанавливаем соединение с ws22 прослушивая тот же свободный порт и получаем доступ к `localhost:80`:
        - `ssh -R 36000:localhost:80 10.20.0.20` используя локальный порт `36000` идет подключение по ssh с машины ws11 на ws22
            - ![с ws11 в ws22](./Screenshots/Part_8_11.png 'подключение по ssh к машине ws22 с машины ws11')
        - Так же необходимо подключиться с машины ws22 на ws11 `ssh -R 36000:localhost:80 10.10.0.20` используя локальный порт `36000` идет подключение по ssh с машины ws22 на ws11
            - ![с ws22 в ws11](./Screenshots/Part_8_12.png 'подключение по ssh к машине r1 с машины ws11')
        - создаем второй терминал комбинацией клавиш `Alt + F2` и и выполняем команду: `telnet 127.0.0.1 [локальный порт]`
            - ![ws11](./Screenshots/Part_8_13.png 'выполнение команды telnet 127.0.0.1 [локальный порт]')